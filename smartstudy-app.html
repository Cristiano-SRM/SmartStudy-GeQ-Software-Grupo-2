<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>SmartStudy - Seu Assistente de Estudos</title>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap" rel="stylesheet">
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }

        :root {
            --azul: #5B8DEF;
            --lilas: #A084E8;
            --branco: #F9FAFB;
            --cinza: #E5E7EB;
            --cinza-escuro: #6B7280;
            --sombra-leve: 0 2px 8px rgba(0, 0, 0, 0.08);
            --sombra-media: 0 4px 12px rgba(0, 0, 0, 0.12);
        }

        body {
            font-family: 'Inter', sans-serif;
            background: var(--branco);
            color: #1F2937;
            display: flex;
            height: 100vh;
            overflow: hidden;
        }

        /* ========== MENU LATERAL ========== */
        .sidebar {
            width: 260px;
            background: white;
            border-right: 1px solid var(--cinza);
            display: flex;
            flex-direction: column;
            box-shadow: var(--sombra-leve);
        }

        .logo {
            padding: 32px 24px;
            font-size: 24px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--azul), var(--lilas));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .nav-menu {
            flex: 1;
            padding: 16px;
        }

        .nav-item {
            display: flex;
            align-items: center;
            padding: 14px 16px;
            margin-bottom: 8px;
            border-radius: 12px;
            cursor: pointer;
            transition: all 0.3s ease;
            color: var(--cinza-escuro);
            font-weight: 500;
            font-size: 15px;
        }

        .nav-item:hover {
            background: var(--branco);
            color: var(--azul);
            transform: translateX(4px);
        }

        .nav-item.active {
            background: linear-gradient(135deg, var(--azul), var(--lilas));
            color: white;
            box-shadow: var(--sombra-media);
        }

        .nav-item svg {
            width: 20px;
            height: 20px;
            margin-right: 12px;
        }

        .logout-btn {
            margin: 16px;
            padding: 14px;
            background: #FEE2E2;
            color: #DC2626;
            border: none;
            border-radius: 12px;
            cursor: pointer;
            font-weight: 600;
            font-size: 15px;
            transition: all 0.3s ease;
        }

        .logout-btn:hover {
            background: #FEF2F2;
            transform: translateY(-2px);
            box-shadow: var(--sombra-leve);
        }

        /* ========== CONTE√öDO PRINCIPAL ========== */
        .main-content {
            flex: 1;
            overflow-y: auto;
            background: var(--branco);
        }

        .view {
            display: none;
            padding: 40px;
            animation: fadeIn 0.4s ease;
        }

        .view.active {
            display: block;
        }

        @keyframes fadeIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .page-title {
            font-size: 32px;
            font-weight: 700;
            margin-bottom: 32px;
            color: #111827;
        }

        /* ========== POMODORO VIEW ========== */
        .pomodoro-container {
            max-width: 500px;
            margin: 60px auto;
            text-align: center;
        }

        .timer-circle {
            position: relative;
            width: 280px;
            height: 280px;
            margin: 0 auto 40px;
        }

        .timer-svg {
            transform: rotate(-90deg);
        }

        .timer-circle-bg {
            fill: none;
            stroke: var(--cinza);
            stroke-width: 12;
        }

        .timer-circle-progress {
            fill: none;
            stroke: url(#gradient);
            stroke-width: 12;
            stroke-linecap: round;
            transition: stroke-dashoffset 1s linear;
        }

        .timer-display {
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            font-size: 56px;
            font-weight: 700;
            color: #111827;
        }

        .timer-controls {
            display: flex;
            gap: 16px;
            justify-content: center;
            margin-top: 32px;
        }

        .btn {
            padding: 14px 32px;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            font-size: 15px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-family: 'Inter', sans-serif;
        }

        .btn-primary {
            background: linear-gradient(135deg, var(--azul), var(--lilas));
            color: white;
            box-shadow: var(--sombra-media);
        }

        .btn-primary:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(91, 141, 239, 0.4);
        }

        .btn-secondary {
            background: white;
            color: var(--cinza-escuro);
            border: 2px solid var(--cinza);
        }

        .btn-secondary:hover {
            background: var(--branco);
            border-color: var(--azul);
            color: var(--azul);
        }

        /* ========== MAT√âRIAS VIEW ========== */
        .add-subject-form {
            background: white;
            padding: 32px;
            border-radius: 16px;
            box-shadow: var(--sombra-leve);
            margin-bottom: 32px;
            max-width: 600px;
        }

        .form-group {
            margin-bottom: 20px;
        }

        .form-group label {
            display: block;
            margin-bottom: 8px;
            font-weight: 600;
            color: #374151;
        }

        .form-input {
            width: 100%;
            padding: 12px 16px;
            border: 2px solid var(--cinza);
            border-radius: 12px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            transition: all 0.3s ease;
        }

        .form-input:focus {
            outline: none;
            border-color: var(--azul);
            box-shadow: 0 0 0 3px rgba(91, 141, 239, 0.1);
        }

        .color-picker {
            width: 60px;
            height: 40px;
            border: 2px solid var(--cinza);
            border-radius: 8px;
            cursor: pointer;
        }

        .subjects-grid {
            display: grid;
            grid-template-columns: repeat(auto-fill, minmax(300px, 1fr));
            gap: 20px;
        }

        .subject-card {
            background: white;
            border-radius: 16px;
            padding: 24px;
            box-shadow: var(--sombra-leve);
            border-left: 4px solid var(--azul);
            transition: all 0.3s ease;
            position: relative;
        }

        .subject-card.completed {
            opacity: 0.7;
            background: #F0FDF4;
        }

        .subject-card.completed::after {
            content: '‚úì CONCLU√çDA';
            position: absolute;
            top: 12px;
            right: 12px;
            background: #10B981;
            color: white;
            padding: 4px 12px;
            border-radius: 8px;
            font-size: 12px;
            font-weight: 600;
        }

        .subject-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--sombra-media);
        }

        .subject-name {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 16px;
            color: #111827;
        }

        .subject-actions {
            display: flex;
            gap: 12px;
        }

        .btn-small {
            padding: 8px 16px;
            font-size: 14px;
            flex: 1;
        }

        .btn-delete {
            background: #FEE2E2;
            color: #DC2626;
            padding: 8px 16px;
            font-size: 14px;
            border: none;
            border-radius: 8px;
            cursor: pointer;
            transition: all 0.3s ease;
            font-weight: 600;
        }

        .btn-delete:hover {
            background: #FEF2F2;
            transform: translateY(-2px);
        }

        .subject-content {
            margin-top: 12px;
            padding: 12px;
            background: var(--branco);
            border-radius: 8px;
            font-size: 14px;
            color: var(--cinza-escuro);
            line-height: 1.5;
        }

        /* ========== RELAT√ìRIOS VIEW ========== */
        .dashboard-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 24px;
            margin-bottom: 32px;
        }

        .stat-card {
            background: white;
            padding: 28px;
            border-radius: 16px;
            box-shadow: var(--sombra-leve);
            text-align: center;
            transition: all 0.3s ease;
        }

        .stat-card:hover {
            transform: translateY(-4px);
            box-shadow: var(--sombra-media);
        }

        .stat-value {
            font-size: 36px;
            font-weight: 700;
            background: linear-gradient(135deg, var(--azul), var(--lilas));
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            margin-bottom: 8px;
        }

        .stat-label {
            color: var(--cinza-escuro);
            font-size: 14px;
            font-weight: 500;
        }

        .chart-container {
            background: white;
            padding: 32px;
            border-radius: 16px;
            box-shadow: var(--sombra-leve);
            margin-bottom: 24px;
        }

        .chart-title {
            font-size: 20px;
            font-weight: 600;
            margin-bottom: 24px;
            color: #111827;
        }

        .bar-chart {
            display: flex;
            align-items: flex-end;
            justify-content: space-around;
            height: 200px;
            margin-top: 20px;
        }

        .bar {
            width: 40px;
            background: linear-gradient(180deg, var(--azul), var(--lilas));
            border-radius: 8px 8px 0 0;
            transition: all 0.3s ease;
            position: relative;
        }

        .bar:hover {
            opacity: 0.8;
            transform: scaleY(1.05);
        }

        .bar-label {
            position: absolute;
            bottom: -24px;
            left: 50%;
            transform: translateX(-50%);
            font-size: 12px;
            color: var(--cinza-escuro);
        }

        /* ========== RESUMO IA VIEW ========== */
        .chat-container {
            max-width: 900px;
            margin: 0 auto;
            display: flex;
            flex-direction: column;
            height: calc(100vh - 160px);
        }

        .chat-messages {
            flex: 1;
            overflow-y: auto;
            padding: 24px;
            background: white;
            border-radius: 16px;
            box-shadow: var(--sombra-leve);
            margin-bottom: 20px;
        }

        .message {
            display: flex;
            margin-bottom: 20px;
            animation: slideIn 0.3s ease;
        }

        @keyframes slideIn {
            from { opacity: 0; transform: translateY(10px); }
            to { opacity: 1; transform: translateY(0); }
        }

        .message.user {
            justify-content: flex-end;
        }

        .message-bubble {
            max-width: 70%;
            padding: 16px 20px;
            border-radius: 16px;
            line-height: 1.5;
        }

        .message.user .message-bubble {
            background: linear-gradient(135deg, var(--azul), var(--lilas));
            color: white;
            border-bottom-right-radius: 4px;
        }

        .message.ai .message-bubble {
            background: var(--branco);
            color: #111827;
            border: 1px solid var(--cinza);
            border-bottom-left-radius: 4px;
        }

        .chat-input-container {
            display: flex;
            gap: 12px;
            background: white;
            padding: 20px;
            border-radius: 16px;
            box-shadow: var(--sombra-leve);
        }

        .chat-input {
            flex: 1;
            padding: 14px 20px;
            border: 2px solid var(--cinza);
            border-radius: 12px;
            font-size: 15px;
            font-family: 'Inter', sans-serif;
            resize: none;
        }

        .chat-input:focus {
            outline: none;
            border-color: var(--azul);
            box-shadow: 0 0 0 3px rgba(91, 141, 239, 0.1);
        }

        .send-btn {
            padding: 14px 28px;
            background: linear-gradient(135deg, var(--azul), var(--lilas));
            color: white;
            border: none;
            border-radius: 12px;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .send-btn:hover {
            transform: translateY(-2px);
            box-shadow: 0 6px 16px rgba(91, 141, 239, 0.4);
        }
    </style>
</head>
<body>
    <!-- ========== MENU LATERAL ========== -->
    <aside class="sidebar">
        <div class="logo">‚ú® SmartStudy</div>
        
        <nav class="nav-menu">
            <div class="nav-item active" onclick="showView('pomodoro')">
                <svg fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M10 18a8 8 0 100-16 8 8 0 000 16zm1-12a1 1 0 10-2 0v4a1 1 0 00.293.707l2.828 2.829a1 1 0 101.415-1.415L11 9.586V6z" clip-rule="evenodd"/>
                </svg>
                Pomodoro
            </div>
            
            <div class="nav-item" onclick="showView('materias')">
                <svg fill="currentColor" viewBox="0 0 20 20">
                    <path d="M9 4.804A7.968 7.968 0 005.5 4c-1.255 0-2.443.29-3.5.804v10A7.969 7.969 0 015.5 14c1.669 0 3.218.51 4.5 1.385A7.962 7.962 0 0114.5 14c1.255 0 2.443.29 3.5.804v-10A7.968 7.968 0 0014.5 4c-1.255 0-2.443.29-3.5.804V12a1 1 0 11-2 0V4.804z"/>
                </svg>
                Mat√©rias
            </div>
            
            <div class="nav-item" onclick="showView('relatorios')">
                <svg fill="currentColor" viewBox="0 0 20 20">
                    <path d="M2 11a1 1 0 011-1h2a1 1 0 011 1v5a1 1 0 01-1 1H3a1 1 0 01-1-1v-5zM8 7a1 1 0 011-1h2a1 1 0 011 1v9a1 1 0 01-1 1H9a1 1 0 01-1-1V7zM14 4a1 1 0 011-1h2a1 1 0 011 1v12a1 1 0 01-1 1h-2a1 1 0 01-1-1V4z"/>
                </svg>
                Relat√≥rios
            </div>
            
            <div class="nav-item" onclick="showView('resumo')">
                <svg fill="currentColor" viewBox="0 0 20 20">
                    <path fill-rule="evenodd" d="M18 13V5a2 2 0 00-2-2H4a2 2 0 00-2 2v8a2 2 0 002 2h3l3 3 3-3h3a2 2 0 002-2zM5 7a1 1 0 011-1h8a1 1 0 110 2H6a1 1 0 01-1-1zm1 3a1 1 0 100 2h3a1 1 0 100-2H6z" clip-rule="evenodd"/>
                </svg>
                Resumo IA
            </div>
        </nav>
        
        <button id="logout-btn" class="logout-btn"> Sair</button>
    </aside>

    <!-- ========== CONTE√öDO PRINCIPAL ========== -->
    <main class="main-content">
        <!-- VIEW: POMODORO -->
        <div id="pomodoro" class="view active">
            <div class="pomodoro-container">
                <h1 class="page-title">Pomodoro Timer</h1>
                
                <div class="timer-circle">
                    <svg class="timer-svg" width="280" height="280">
                        <defs>
                            <linearGradient id="gradient" x1="0%" y1="0%" x2="100%" y2="100%">
                                <stop offset="0%" style="stop-color:#5B8DEF;stop-opacity:1" />
                                <stop offset="100%" style="stop-color:#A084E8;stop-opacity:1" />
                            </linearGradient>
                        </defs>
                        <circle class="timer-circle-bg" cx="140" cy="140" r="120"/>
                        <circle id="progressCircle" class="timer-circle-progress" cx="140" cy="140" r="120" 
                                stroke-dasharray="754" stroke-dashoffset="0"/>
                    </svg>
                    <div class="timer-display" id="timerDisplay">25:00</div>
                </div>
                
                <div class="timer-controls">
                    <button class="btn btn-primary" id="startBtn">‚ñ∂Ô∏è Iniciar</button>
                    <button class="btn btn-secondary" id="pauseBtn">‚è∏Ô∏è Pausar</button>
                    <button class="btn btn-secondary" id="resetBtn">üîÑ Reiniciar</button>
                </div>
                
                <div class="timer-controls" style="margin-top: 16px;">
                    <button class="btn btn-secondary" onclick="openTimerConfig()">‚öôÔ∏è Configurar Tempo</button>
                </div>
            </div>
        </div>

        <!-- Modal de Configura√ß√£o de Tempo -->
        <div id="timerConfigModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: white; padding: 32px; border-radius: 16px; max-width: 400px; box-shadow: var(--sombra-media);">
                <h2 style="margin-bottom: 24px; font-size: 24px; font-weight: 600;">‚öôÔ∏è Configurar Tempo</h2>
                <div class="form-group">
                    <label>Minutos</label>
                    <input type="number" id="customMinutes" class="form-input" value="25" min="1" max="120">
                </div>
                <div style="display: flex; gap: 12px; margin-top: 24px;">
                    <button class="btn btn-primary" onclick="applyCustomTimer()">‚úì Aplicar</button>
                    <button class="btn btn-secondary" onclick="closeTimerConfig()">‚úï Cancelar</button>
                </div>
            </div>
        </div>

        <!-- VIEW: MAT√âRIAS -->
        <div id="materias" class="view">
            <h1 class="page-title">üìö Suas Mat√©rias</h1>
            
            <div class="add-subject-form">
                <div class="form-group">
                    <label>Nome da Mat√©ria</label>
                    <input type="text" id="subjectName" class="form-input" placeholder="Ex: Matem√°tica, Hist√≥ria...">
                </div>
                
                <div class="form-group">
                    <label>Cor Identificadora</label>
                    <input type="color" id="subjectColor" class="color-picker" value="#5B8DEF">
                </div>
                
                <button class="btn btn-primary" onclick="addSubject()">‚ûï Adicionar Mat√©ria</button>
            </div>
            
            <div id="subjectsList" class="subjects-grid">
                <!-- Mat√©rias ser√£o adicionadas aqui -->
            </div>
        </div>

        <!-- Modal para Registrar Conte√∫do -->
        <div id="contentModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: white; padding: 32px; border-radius: 16px; max-width: 500px; width: 90%; box-shadow: var(--sombra-media);">
                <h2 style="margin-bottom: 24px; font-size: 24px; font-weight: 600;">üìù Registrar Conte√∫do</h2>
                <div class="form-group">
                    <label id="contentModalLabel">Descri√ß√£o do Conte√∫do</label>
                    <textarea id="contentText" class="form-input" rows="4" placeholder="Descreva o que voc√™ estudou ou precisa estudar..."></textarea>
                </div>
                <div style="display: flex; gap: 12px; margin-top: 24px;">
                    <button class="btn btn-primary" onclick="saveContent()">‚úì Salvar</button>
                    <button class="btn btn-secondary" onclick="closeContentModal()">‚úï Cancelar</button>
                </div>
            </div>
        </div>

        <!-- Modal de Confirma√ß√£o de Exclus√£o -->
        <div id="deleteModal" style="display: none; position: fixed; top: 0; left: 0; width: 100%; height: 100%; background: rgba(0,0,0,0.5); z-index: 1000; align-items: center; justify-content: center;">
            <div style="background: white; padding: 32px; border-radius: 16px; max-width: 400px; width: 90%; box-shadow: var(--sombra-media);">
                <h2 style="margin-bottom: 16px; font-size: 24px; font-weight: 600;">üóëÔ∏è Excluir Mat√©ria</h2>
                <p id="deleteModalText" style="margin-bottom: 24px; color: var(--cinza-escuro); line-height: 1.6;">Tem certeza que deseja excluir esta mat√©ria?</p>
                <div style="display: flex; gap: 12px;">
                    <button class="btn btn-primary" style="background: #DC2626;" onclick="confirmDelete()">‚úì Sim, Excluir</button>
                    <button class="btn btn-secondary" onclick="closeDeleteModal()">‚úï Cancelar</button>
                </div>
            </div>
        </div>

        <!-- VIEW: RELAT√ìRIOS -->
        <div id="relatorios" class="view">
            <h1 class="page-title">üìä Relat√≥rios de Produtividade</h1>
            
            <div class="dashboard-grid">
                <div class="stat-card">
                    <div class="stat-value">18h 42m</div>
                    <div class="stat-label">Tempo Total Estudado</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-value">47</div>
                    <div class="stat-label">Sess√µes Conclu√≠das</div>
                </div>
                
                <div class="stat-card">
                    <div class="stat-value">12 dias</div>
                    <div class="stat-label">Maior Sequ√™ncia</div>
                </div>
            </div>
            
            <div class="chart-container">
                <div class="chart-title">üìà Tempo de Estudo por Dia (√öltima Semana)</div>
                <div class="bar-chart">
                    <div class="bar" style="height: 60%"><span class="bar-label">Seg</span></div>
                    <div class="bar" style="height: 80%"><span class="bar-label">Ter</span></div>
                    <div class="bar" style="height: 45%"><span class="bar-label">Qua</span></div>
                    <div class="bar" style="height: 90%"><span class="bar-label">Qui</span></div>
                    <div class="bar" style="height: 70%"><span class="bar-label">Sex</span></div>
                    <div class="bar" style="height: 35%"><span class="bar-label">S√°b</span></div>
                    <div class="bar" style="height: 50%"><span class="bar-label">Dom</span></div>
                </div>
            </div>
            
            <button class="btn btn-primary">üì• Exportar Relat√≥rio</button>
        </div>

        <!-- VIEW: RESUMO IA -->
        <div id="resumo" class="view">
            <h1 class="page-title">ü§ñ Resumo Inteligente com IA</h1>
            
            <div class="chat-container">
                <div class="chat-messages" id="chatMessages">
                    <div class="message ai">
                        <div class="message-bubble">
                            Ol√°! üëã Sou seu assistente de estudos com IA. Cole aqui o conte√∫do que voc√™ estudou e eu vou gerar um resumo inteligente para voc√™!
                        </div>
                    </div>
                </div>
                
                <div class="chat-input-container">
                    <textarea id="chatInput" class="chat-input" rows="3" placeholder="Digite o conte√∫do estudado..."></textarea>
                    <button class="send-btn" onclick="sendMessage()">‚ú® Gerar Resumo</button>
                </div>
            </div>
        </div>
    </main>

    <script>
        const usuarioLogado = JSON.parse(localStorage.getItem("usuarioLogado"));
        // Impedir acesso direto ao appshell sem login
if (!localStorage.getItem("usuarioLogado")) {
    window.location.href = "SmartStudy.html"; 
}
console.log("ID do usu√°rio logado:", usuarioLogado.id);
console.log("Nome do usu√°rio:", usuarioLogado.usuario);

        // ========== SISTEMA DE NAVEGA√á√ÉO (SPA) ==========
        function showView(viewId) {
            // Ocultar todas as views
            document.querySelectorAll('.view').forEach(view => {
                view.classList.remove('active');
            });
            
            // Mostrar a view selecionada
            document.getElementById(viewId).classList.add('active');
            
            // Atualizar menu ativo
            document.querySelectorAll('.nav-item').forEach(item => {
                item.classList.remove('active');
            });
            event.target.closest('.nav-item').classList.add('active');
        }

        // ========== POMODORO TIMER ==========
        let timerInterval;
        let timeLeft = 1500; // 25 minutos em segundos
        let totalTime = 1500;
        let isRunning = false;

        function updateTimerDisplay() {
            const minutes = Math.floor(timeLeft / 60);
            const seconds = timeLeft % 60;
            document.getElementById('timerDisplay').textContent = 
                `${minutes.toString().padStart(2, '0')}:${seconds.toString().padStart(2, '0')}`;
            
            // Atualizar c√≠rculo de progresso
            const progress = (timeLeft / totalTime) * 754;
            document.getElementById('progressCircle').style.strokeDashoffset = 754 - progress;
        }

        function startTimer() {
            if (!isRunning) {
                isRunning = true;
                timerInterval = setInterval(() => {
                    if (timeLeft > 0) {
                        timeLeft--;
                        updateTimerDisplay();
                    } else {
                        pauseTimer();
                        alert('‚è∞ Tempo conclu√≠do! Fa√ßa uma pausa! üéâ');
                    }
                }, 1000);
            }
        }

        function pauseTimer() {
            isRunning = false;
            clearInterval(timerInterval);
        }

        function resetTimer() {
            pauseTimer();
            timeLeft = totalTime;
            updateTimerDisplay();
        }

        function setTimer(minutes) {
            pauseTimer();
            totalTime = minutes * 60;
            timeLeft = totalTime;
            updateTimerDisplay();
        }

        function openTimerConfig() {
            document.getElementById('timerConfigModal').style.display = 'flex';
            document.getElementById('customMinutes').value = Math.floor(totalTime / 60);
        }

        function closeTimerConfig() {
            document.getElementById('timerConfigModal').style.display = 'none';
        }

        function applyCustomTimer() {
            const minutes = parseInt(document.getElementById('customMinutes').value);
            if (minutes > 0 && minutes <= 120) {
                setTimer(minutes);
                closeTimerConfig();
            } else {
                alert('‚ö†Ô∏è Por favor, digite um valor entre 1 e 120 minutos!');
            }
        }

        // Event listeners para bot√µes do Pomodoro
        document.getElementById('startBtn').addEventListener('click', startTimer);
        document.getElementById('pauseBtn').addEventListener('click', pauseTimer);
        document.getElementById('resetBtn').addEventListener('click', resetTimer);

        // ========== GEST√ÉO DE MAT√âRIAS ==========
        let subjects = [];
        let currentSubjectId = null;
        let subjectToDelete = null;

        function addSubject() {
            const name = document.getElementById('subjectName').value;
            const color = document.getElementById('subjectColor').value;
            
            if (name.trim() === '') {
                alert('‚ö†Ô∏è Por favor, digite o nome da mat√©ria!');
                return;
            }
            
            const subject = {
                id: Date.now(),
                name: name,
                color: color,
                content: '',
                completed: false
            };
            
            subjects.push(subject);
            renderSubjects();
            
            // Limpar campos
            document.getElementById('subjectName').value = '';
            document.getElementById('subjectColor').value = '#5B8DEF';
        }

        function renderSubjects() {
            const container = document.getElementById('subjectsList');
            container.innerHTML = '';
            
            if (subjects.length === 0) {
                container.innerHTML = '<p style="text-align: center; color: var(--cinza-escuro); padding: 40px;">Nenhuma mat√©ria cadastrada ainda. Adicione sua primeira mat√©ria acima! üìö</p>';
                return;
            }
            
            subjects.forEach(subject => {
                const card = document.createElement('div');
                card.className = 'subject-card' + (subject.completed ? ' completed' : '');
                card.style.borderLeftColor = subject.color;
                
                let contentHTML = '';
                if (subject.content) {
                    contentHTML = `<div class="subject-content">${subject.content}</div>`;
                }
                
                const disabledAttr = subject.completed ? 'disabled style="opacity: 0.5; cursor: not-allowed;"' : '';
                
                card.innerHTML = `
                    <div class="subject-name">${subject.name}</div>
                    ${contentHTML}
                    <div class="subject-actions">
                        <button class="btn btn-primary btn-small" onclick="registerContent(${subject.id})" ${disabledAttr}>
                            üìù Registrar Conte√∫do
                        </button>
                        <button class="btn btn-secondary btn-small" onclick="completeSubject(${subject.id})" ${disabledAttr}>
                            ‚úÖ Concluir
                        </button>
                        <button class="btn-delete" onclick="event.stopPropagation(); deleteSubject(${subject.id})">
                            üóëÔ∏è
                        </button>
                    </div>
                `;
                container.appendChild(card);
            });
        }

        function registerContent(id) {
            const subject = subjects.find(s => s.id === id);
            if (subject && !subject.completed) {
                currentSubjectId = id;
                document.getElementById('contentModalLabel').textContent = `Conte√∫do de ${subject.name}`;
                document.getElementById('contentText').value = subject.content || '';
                document.getElementById('contentModal').style.display = 'flex';
            }
        }

        function closeContentModal() {
            document.getElementById('contentModal').style.display = 'none';
            document.getElementById('contentText').value = '';
            currentSubjectId = null;
        }

        function saveContent() {
            if (currentSubjectId) {
                const content = document.getElementById('contentText').value.trim();
                const subject = subjects.find(s => s.id === currentSubjectId);
                if (subject) {
                    subject.content = content;
                    renderSubjects();
                    closeContentModal();
                }
            }
        }

        function completeSubject(id) {
            const subject = subjects.find(s => s.id === id);
            if (subject && !subject.completed) {
                subject.completed = true;
                renderSubjects();
            }
        }

        function deleteSubject(id) {
            const subject = subjects.find(s => s.id === id);
            if (subject) {
                subjectToDelete = id;
                document.getElementById('deleteModalText').textContent = 
                    `Tem certeza que deseja excluir a mat√©ria "${subject.name}"?`;
                document.getElementById('deleteModal').style.display = 'flex';
            }
        }

        function closeDeleteModal() {
            document.getElementById('deleteModal').style.display = 'none';
            subjectToDelete = null;
        }

        function confirmDelete() {
            if (subjectToDelete !== null) {
                subjects = subjects.filter(s => s.id !== subjectToDelete);
                renderSubjects();
                closeDeleteModal();
            }
        }

        // ========== CHAT IA ==========
        function sendMessage() {
            const input = document.getElementById('chatInput');
            const message = input.value.trim();
            
            if (message === '') return;
            
            // Adicionar mensagem do usu√°rio
            addChatMessage(message, 'user');
            input.value = '';
            
            // Simular resposta da IA ap√≥s 1 segundo
            setTimeout(() => {
                const aiResponse = generateAIResponse(message);
                addChatMessage(aiResponse, 'ai');
            }, 1000);
        }

        function addChatMessage(text, type) {
            const messagesContainer = document.getElementById('chatMessages');
            const messageDiv = document.createElement('div');
            messageDiv.className = `message ${type}`;
            messageDiv.innerHTML = `<div class="message-bubble">${text}</div>`;
            messagesContainer.appendChild(messageDiv);
            messagesContainer.scrollTop = messagesContainer.scrollHeight;
        }

        function generateAIResponse(userMessage) {
            // Resposta simulada da IA
            const responses = [
                `üìö Resumo gerado com sucesso! Com base no conte√∫do "${userMessage.substring(0, 50)}...", identifiquei os principais pontos: conceitos fundamentais, aplica√ß√µes pr√°ticas e exemplos relevantes. Recomendo revisar estes t√≥picos em 24h para melhor reten√ß√£o! üí°`,
                `‚ú® Analisei seu conte√∫do! Os pontos-chave incluem: defini√ß√µes essenciais, rela√ß√µes entre conceitos e contexto hist√≥rico. Sugiro criar flashcards para os termos principais. Quer que eu gere quest√µes de revis√£o? üéØ`,
                `üéì Resumo conclu√≠do! Detectei 3 conceitos principais, 5 exemplos pr√°ticos e 2 teorias fundamentais. Este conte√∫do se conecta bem com suas outras mat√©rias. Continue assim! üåü`
            ];
            
            return responses[Math.floor(Math.random() * responses.length)];
        }

        // Permitir enviar mensagem com Enter
        document.getElementById('chatInput').addEventListener('keypress', (e) => {
            if (e.key === 'Enter' && !e.shiftKey) {
                e.preventDefault();
                sendMessage();
            }
        });

        // ========== INICIALIZA√á√ÉO ==========
        // P√°gina inicia sem mat√©rias de exemplo
        renderSubjects();
        
        document.addEventListener("DOMContentLoaded", () => {
    const logoutBtn = document.getElementById("logout-btn");

    if (logoutBtn) {
        logoutBtn.addEventListener("click", () => {
            localStorage.removeItem("usuarioLogado");
            window.location.href = "SmartStudy.html";
        });
    }
});


    </script>
</body>
</html>